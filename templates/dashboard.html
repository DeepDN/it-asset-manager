{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h1 class="mb-2"><i class="fas fa-tachometer-alt me-3"></i>Dashboard</h1>
            <p class="text-muted mb-0">Welcome to your IT Asset Management System</p>
        </div>
        <div class="text-end">
            <small class="text-muted">System Status: <span class="text-success">Online</span></small>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card card-stats h-100">
            <div class="card-body p-4">
                <div class="row align-items-center">
                    <div class="col">
                        <h6 class="card-title text-uppercase mb-2" style="font-size: 0.75rem; opacity: 0.8;">Total Assets</h6>
                        <span class="h2 font-weight-bold mb-0">{{ total_assets }}</span>
                        <p class="mb-0 mt-2">
                            <small style="opacity: 0.8;">
                                <i class="fas fa-chart-line me-1"></i>
                                All equipment tracked
                            </small>
                        </p>
                    </div>
                    <div class="col-auto">
                        <div class="icon-shape stats-icon">
                            <i class="fas fa-laptop"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card card-stats-success h-100">
            <div class="card-body p-4">
                <div class="row align-items-center">
                    <div class="col">
                        <h6 class="card-title text-uppercase mb-2" style="font-size: 0.75rem; opacity: 0.8;">Assigned Assets</h6>
                        <span class="h2 font-weight-bold mb-0">{{ assigned_assets }}</span>
                        <p class="mb-0 mt-2">
                            <small style="opacity: 0.8;">
                                <i class="fas fa-user-check me-1"></i>
                                Currently in use
                            </small>
                        </p>
                    </div>
                    <div class="col-auto">
                        <div class="icon-shape stats-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card card-stats-warning h-100">
            <div class="card-body p-4">
                <div class="row align-items-center">
                    <div class="col">
                        <h6 class="card-title text-uppercase mb-2" style="font-size: 0.75rem; opacity: 0.8;">Available Assets</h6>
                        <span class="h2 font-weight-bold mb-0">{{ unassigned_assets }}</span>
                        <p class="mb-0 mt-2">
                            <small style="opacity: 0.8;">
                                <i class="fas fa-box me-1"></i>
                                Ready for assignment
                            </small>
                        </p>
                    </div>
                    <div class="col-auto">
                        <div class="icon-shape stats-icon">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card card-stats-info h-100">
            <div class="card-body p-4">
                <div class="row align-items-center">
                    <div class="col">
                        <h6 class="card-title text-uppercase mb-2" style="font-size: 0.75rem; opacity: 0.8;">Active Access</h6>
                        <span class="h2 font-weight-bold mb-0">{{ total_app_access }}</span>
                        <p class="mb-0 mt-2">
                            <small style="opacity: 0.8;">
                                <i class="fas fa-shield-alt me-1"></i>
                                Application permissions
                            </small>
                        </p>
                    </div>
                    <div class="col-auto">
                        <div class="icon-shape stats-icon">
                            <i class="fas fa-users-cog"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-8 mb-4">
        <div class="card h-100">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-bolt text-primary me-2"></i>Quick Actions
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <a href="{{ url_for('add_asset') }}" class="btn btn-primary w-100 py-3">
                            <i class="fas fa-plus-circle me-2"></i>
                            <div>
                                <strong>Add New Asset</strong>
                                <br><small>Register new equipment</small>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-6 mb-3">
                        <a href="{{ url_for('add_app_access') }}" class="btn btn-outline-primary w-100 py-3">
                            <i class="fas fa-user-plus me-2"></i>
                            <div>
                                <strong>Grant App Access</strong>
                                <br><small>Assign application permissions</small>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-6 mb-3">
                        <a href="{{ url_for('add_github_access') }}" class="btn btn-outline-primary w-100 py-3">
                            <i class="fab fa-github me-2"></i>
                            <div>
                                <strong>Add GitHub Access</strong>
                                <br><small>Manage repository permissions</small>
                            </div>
                        </a>
                    </div>
                    <div class="col-md-6 mb-3">
                        <a href="{{ url_for('assets') }}" class="btn btn-outline-primary w-100 py-3">
                            <i class="fas fa-search me-2"></i>
                            <div>
                                <strong>View All Assets</strong>
                                <br><small>Browse and manage inventory</small>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4 mb-4">
        <div class="card h-100">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-download text-success me-2"></i>Export Center
                </h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-3">
                    <a href="{{ url_for('export_assets') }}" class="btn btn-outline-info">
                        <i class="fas fa-file-csv me-2"></i>Assets Report
                        <small class="d-block text-dark">Complete inventory export</small>
                    </a>
                    <a href="{{ url_for('export_app_access') }}" class="btn btn-outline-info">
                        <i class="fas fa-file-csv me-2"></i>Access Report
                        <small class="d-block text-dark">Application permissions audit</small>
                    </a>
                    <a href="{{ url_for('export_github_access') }}" class="btn btn-outline-info">
                        <i class="fas fa-file-csv me-2"></i>GitHub Report
                        <small class="d-block text-dark">Repository access audit</small>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-bar text-info me-2"></i>System Overview
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3 mb-3">
                        <div class="p-3">
                            <i class="fab fa-github fa-2x text-dark mb-2"></i>
                            <h4 class="mb-1">{{ total_github_access }}</h4>
                            <small class="text-muted">GitHub Access Records</small>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="p-3">
                            <i class="fas fa-users-cog fa-2x text-primary mb-2"></i>
                            <h4 class="mb-1">{{ total_app_access }}</h4>
                            <small class="text-muted">Application Access Records</small>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="p-3">
                            <i class="fas fa-laptop fa-2x text-success mb-2"></i>
                            <h4 class="mb-1">{{ total_assets }}</h4>
                            <small class="text-muted">Total IT Assets</small>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="p-3">
                            <i class="fas fa-shield-alt fa-2x text-warning mb-2"></i>
                            <h4 class="mb-1">{{ (total_app_access + total_github_access) }}</h4>
                            <small class="text-muted">Total Access Permissions</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
